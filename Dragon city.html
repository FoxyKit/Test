<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
      <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css">

<center>
<table border="10" style="width: 50%px;"><tbody>
<tr><td bgcolor="#222222" width="100%"><span style="color: red; font-size: 25; large;"><marquee><b>..::<span style="font-size: 24; large;"> Tool by Red Racoon </span>::..</b></marquee></span></td></tr>
</tbody></table>
</center><br>
<br>
<center><fieldset  style="width:350px"><form method="post">
<legend>Dragon City Tool</legend>
<center>
<p>
<center><label>Facebook Id :</label>
<span class="field"><input style="width: 300px" type="text" value="" name="fbid" placeholder="Fill your Facebook Id"/></span>
</p>
<label>Session Id :</label>
<span class="field"><input style="width: 300px" type="text" value=""  name="userkey" placeholder="Fill your Session Id "/></span>
<p>

<center><label>Packet :</label>
<select name="commands" style="width: 300px" class="browser-default" >
<option value="{&quot;commands&quot;:[{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627},{&quot;number&quot;:1,&quot;args&quot;:[&quot;100000030&quot;,&quot;[131,181,193,938,951]&quot;],&quot;cmd&quot;:&quot;assist_neighbor&quot;,&quot;time&quot;:1539214627}]}">Random Gold & Exp</option>



</select></center>
</p>
<p>
<p>
</center>
<center><button name="kirim" class="btn btn-primary dlRequests" type="submit" >Submit</button></center>
</p>
</form></fieldset>


<fieldset style="position:absolute;top:93px;right:120px;width:280px;height:300px">
<legend>Result</legend>

</fieldset>
<!--marquee behavior="scroll" direction="left"><img src="http://www.laghideldolmen.it/images/sampledata/fruitshop/info.png" width="200" height="200" alt="smile"></marquee-->
<br>
<?PHP
if(isset($_POST['kirim'])){
$playerinfo=ambilplayerinfo($_POST['fbid'],$_POST['userkey']);
//$data='==========DC USER INFO==========<br/>';
$data.=infodcfreegold($playerinfo);
echo $data;
}

function ambilplayerinfo($id,$userkey){
$result=sendPost("http://dc-canvas.socialpointgames.com/dragoncity/web/srv/get_player_info.php?USERID=".$id."&user_key=".$userkey."&spdebug=1",null);
$result = explode(";",$result);
$result = json_decode($result[1],true);
return $result;
}
function sendPost($url,$data=null){
$ch = curl_init(); 
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
if($data!=null){
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,http_build_query($data));
}
$result = curl_exec ($ch); 
curl_close ($ch); 
return $result;	
}
function infodcfreegold($data){
/*
$return = 'ID FB : '.$data['playerInfo']['pid'].'<br/>';
$return.= 'NAME :'.$data['playerInfo']['name'].'<br/>';
$return.='===========================<br/>';
$return.= 'LEVEL :'.$data['playerInfo']['level'].'<br/>';
$return.= 'GEMS :'.number_format($data['playerInfo']['cash'],0,',','.').'<br/>';
$return.= 'GOLD :'.number_format($data['playerInfo']['gold'],0,',','.').'<br/>';
$return.= 'FOOD :'.number_format($data['playerInfo']['food'],0,',','.').'<br/>';
$return.= 'XP :'.number_format($data['playerInfo']['xp'],0,',','.').'<br/>';
*/
echo "<fieldset style=position:absolute;top:93px;right:120px;width:280px;height:300px>";
echo "<legend>Result</legend>";
echo "<font color='blue'><br>Name :</font> ".$data['playerInfo']['name'].'<br/>';
echo "<font color='purple'><br>Gems :</font> ".number_format($data['playerInfo']['cash'],0,',','.').'<br/>';
echo "<font color='red'><br>Food :</font> ".number_format($data['playerInfo']['food'],0,',','.').'<br/>';
echo "<font color='gold'><br>Gold :</font> ".number_format($data['playerInfo']['gold'],0,',','.').'<br/>';
echo "<font color='lightblue'><br>Exp :</font> ".number_format($data['playerInfo']['xp'],0,',','.').'<br/>';
echo "</fieldset>";
return $return;	
}

function getNewNumber($a, $b, $data)
{
    $x = explode($a, $data);
    $z = explode($b, $x[1]);
    $oh = $z[0];
    if ($x && $z) {
        return $oh;
    } else {
        return false;
    }
}

function process($commands, $num)
{
    $data = executeCmd($commands, $num);

    if (stristr($data, 'bad command number: expected')) {
        $newNum = getNewNumber('bad command number: expected ', ',', $data);
        $data = executeCmd($commands, $newNum);
        return substr($data, 65);
    } else {
        return substr($data, 65);
    }
}

function fakeip()
{
    $ip = "23.21.158.189";
    $ip = long2ip(mt_rand(0, 65537) * mt_rand(0, 65535));
    return $ip;

}

function getInfo()
{
    global $fbid, $user;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://dc-canvas.socialpointgames.com/dragoncity/web/srv/get_player_info.php?USERID=$fbid&user_key=$user&language=fr");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_PROXY, 'localhost:8888');
    curl_setopt($ch, CURLINFO_HEADER_OUT, true);


    curl_exec($ch);
    curl_close($ch);
}

function executeCmd($commands, $num)
{
    global $fbid, $user;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://dc-canvas.socialpointgames.com/dragoncity/web/srv/packet.php?USERID=$fbid&user_key=$user&spdebug=xId1YTUtlFg9dWWmzkrkeUlWCgmCNfO7");
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type:application/x-www-form-urlencoded', 'User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/28.0.1500.72 Safari/537.36', 'Referer:http://default01.static.socialpointgames.com/static/dragoncity/flash/DCLoader2.swf/[[DYNAMIC]]/1'));
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query(array("id" => "$fbid", "data" => generateHash($commands, $num))));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    //curl_setopt($ch, CURLOPT_PROXY, 'localhost:8888');
    curl_setopt($ch, CURLINFO_HEADER_OUT, true);


    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

function generateHash($commands, $n)
{
    $dataArray = array( "first_number" => $n,  "publishActions" => 0,   "tries" => 2, "flashVersion" => "0.5.23a", "ts" => time());
    $secret = 'RGhXbiy4xEeDnSNX1oBG';
    $data = str_replace(" ", "", str_replace('}', ',' . $commands . '}',  json_encode ($dataArray)));
    return hash_hmac('sha256', $data, $secret) . ';' . $data;
}

    function infoplayer() {
    $str = '<fieldset>

    </fieldset>';
}

$ipRemote = 'http://default01.static.socialpointgames.com';
$client = '127.0.0.1';
if (isset($_POST["fbid"]) && isset($_POST["userkey"])) {
    $fbid = $_POST['fbid'];
    $user = $_POST['userkey'];
    $hc = $_POST["commands"];

    $hc = json_decode($hc, 1);
    $num = 1;

    for ($i = 0; $i < count($hc['commands']); $i++) {
        $hc['commands'][$i]['time'] = time();
    }
    $hc = substr(substr(str_replace(" ", "", json_encode($hc)), 0, -1), 1);

     getInfo();
    $sucb = json_decode(process($hc, $num), 1);
    if ($sucb['result'] == false) {
        echo "<center><h3><font style='color:red'>Failure</font></h3>";
        echo "<pre>" . print_r($sucb);
    } else {
        if (isset($sucb['response'][0]['error'])) {
            echo "<center><h3><font style='color:red'>Failure </font></h3>";
            print_r($sucb);
        } else {
            echo "<center><h3><font style='color:green'> Completed </font></h3>";
            print_r($sucb)/*.'</fieldset>'*/;
            
        }
    }
}

?>
</body>
